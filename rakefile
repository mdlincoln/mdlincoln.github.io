task :default do
	puts "Pick an argument!"
end

desc "Open editing apps and begin serving site"
task :blog => [:delete] do
	`open /Applications/GitHub.app`
	`sublime .`
	`jekyll serve --watch --future`
end

desc "Stash googleanalytics code in _drafts folder"
task :delete do
	`mv _includes/googleanalytics.js _drafts/`
end

desc "Restores googleanalytics code ready for publishing"
task :restore do
	`mv _drafts/googleanalytics.js _includes/`
end

desc "Create a new blog post file"
task :post => [:delete] do
	STDOUT.print "Post title: "
	title = STDIN.gets.chomp
    @filename = title.downcase.gsub(/\W/, "-").gsub(/-{2,}/,"-").gsub(/-$/,"").gsub(/^-/,"")
    puts post_file(title)
end

desc "Prepeare files for merge and push"
task :pub => [:restore] do

end

def post_file(title)
	header = [
		"---",
		"layout: post",
		"comments: true",
		"title: #{title}",
		"date:",
		"tags:",
		"---"
	]
	header_string = header.to_s
	return header_string
end

